<!DOCTYPE html><html lang="zh-cmn-Hans" prefix="og: http://ogp.me/ns#" class="han-init"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" /><title>MySQL 常用数据类型和函数 &mdash; 码农感悟</title><link rel="stylesheet" href="https://se.zhoubin.online/assets/vendor/primer-css/css/primer.css"><link rel="stylesheet" href="https://se.zhoubin.online/assets/css/components/collection.css"><link rel="stylesheet" href="https://se.zhoubin.online/assets/css/components/repo-card.css"><link rel="stylesheet" href="https://se.zhoubin.online/assets/css/sections/repo-list.css"><link rel="stylesheet" href="https://se.zhoubin.online/assets/css/components/boxed-group.css"><link rel="stylesheet" href="https://se.zhoubin.online/assets/css/globals/common.css"><link rel="stylesheet" href="https://se.zhoubin.online/assets/css/globals/responsive.css"><link rel="stylesheet" href="https://se.zhoubin.online/assets/css/posts/index.css"><link rel="stylesheet" href="https://se.zhoubin.online/assets/vendor/octicons/octicons/octicons.css"><link rel="stylesheet" href="https://mazhuang.org/rouge-themes/dist/github.css"><link rel="canonical" href="https://se.zhoubin.online/2024/02/06/mysqlchoosedatatype/"><link rel="alternate" type="application/atom+xml" title="码农感悟" href="https://se.zhoubin.online/feed.xml"><link rel="shortcut icon" href="https://se.zhoubin.online/favicon.ico"><meta property="og:title" content="MySQL 常用数据类型和函数"><meta name="keywords" content="mysql, sql"><meta name="og:keywords" content="mysql, sql"><meta name="description" content="数据类型"><meta name="og:description" content="数据类型"><meta property="og:url" content="https://se.zhoubin.online/2024/02/06/mysqlchoosedatatype/"><meta property="og:site_name" content="码农感悟"><meta property="og:type" content="article"><meta property="og:locale" content="zh_CN" /><meta property="article:published_time" content="2024-02-06"> <script src="https://se.zhoubin.online/assets/vendor/jquery/dist/jquery.min.js"></script> <script src="https://se.zhoubin.online/assets/js/main.js"></script></head><body class="" data-mz=""><header class="site-header"><div class="container"><h1><a href="https://se.zhoubin.online/" title="码农感悟"><span class="octicon octicon-mark-github"></span> 码农感悟</a></h1><button class="collapsed mobile-visible" type="button" onclick="toggleMenu();"> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span> </button><nav class="site-header-nav" role="navigation"> <a href="https://se.zhoubin.online/" class="site-header-nav-item" target="" title="首页">首页</a> <a href="https://se.zhoubin.online/categories/" class="site-header-nav-item" target="" title="分类">分类</a> <a href="https://se.zhoubin.online/archives/" class="mobile-hidden site-header-nav-item" target="" title="归档">归档</a> <a href="https://se.zhoubin.online/open-source/" class="mobile-hidden site-header-nav-item" target="" title="开源">开源</a> <a href="https://se.zhoubin.online/fragments/" class="site-header-nav-item" target="" title="片段">片段</a> <a href="https://se.zhoubin.online/wiki/" class="site-header-nav-item" target="" title="维基">维基</a> <a href="https://se.zhoubin.online/links/" class="mobile-hidden site-header-nav-item" target="" title="链接">链接</a> <a href="https://se.zhoubin.online/about/" class="site-header-nav-item" target="" title="关于">关于</a> <a class="mobile-hidden" href="https://se.zhoubin.online/feed.xml"><span class="octicon octicon-rss" style="color:orange;"></span></a></nav></div></header><section class="collection-head small geopattern" data-pattern-id="MySQL 常用数据类型和函数"><div class="container"><div class="columns"><div class="column three-fourths"><div class="collection-title"><h1 class="collection-header">MySQL 常用数据类型和函数</h1><div class="collection-info"> <span class="meta-info"> <span class="octicon octicon-calendar"></span> 2024/02/06 </span> <span class="meta-info"> <span class="octicon octicon-file-directory"></span> <a href="https://se.zhoubin.online/categories/#mysql" title="mysql">mysql</a> </span> <span class="meta-info"> <span class="octicon octicon-file-directory"></span> <a href="https://se.zhoubin.online/categories/#sql" title="sql">sql</a> </span> <span class="meta-info"> <span class="octicon octicon-clock"></span> 共 3828 字，约 11 分钟 </span></div></div></div><div class="column one-fourth mobile-hidden"><div class="collection-title"> <img style="height:72px;width:72px" src="https://se.zhoubin.online/assets/images/qrcode.jpg" alt="码农感悟" /></div></div></div></div></section><section class="container content"><div class="columns"><div class="column three-fourths" ><article class="article-content markdown-body"><h4 id="数据类型">数据类型</h4><h5 id="整形">整形</h5><ul><li>使用场景 类型|字节|备注</li><li><table><tbody><tr><td>TINYINT</td><td>1</td><td>一般用于枚举数据，比如系统设定等取值范围很小且固定的场景</td></tr><tr><td>SMALLINT</td><td>2</td><td>可以用于较小范围的统计数据，比如统计工厂的固定资产库存数量等</td></tr><tr><td>MEDIUMINT</td><td>3</td><td>用于较大整数的计算，比如车站每日的客流量等</td></tr><tr><td>INT（INTEGER）</td><td>4</td><td>取值范围足够大，一般情况下不用考虑超限问题，用的最多</td></tr><tr><td>BIGINT</td><td>8</td><td>只有当你处理特别巨大的整数时才会用到。比如双十一的交易量、大型门户网站点击量，证券公司衍生产品持仓等</td></tr></tbody></table></li><li>取值范围 类型|有符号数取值范围|无符号数取值范围|字节</li><li><table><tbody><tr><td>TINYINT</td><td>-128~127</td><td>0~255</td><td>1</td></tr><tr><td>SMALLINT</td><td>-32768~32767</td><td>0~65535</td><td>2</td></tr><tr><td>MEDIUMINT</td><td>-8388608~8388607</td><td>0~16777215</td><td>3</td></tr><tr><td>INT（INTEGER）</td><td>-2147483648~2147483647</td><td>0~4294967295</td><td>4</td></tr><tr><td>BIGINT</td><td>-922337203&lt;/br&gt;6854775808~9223372036854775807</td><td>0~1844674407_3709551615</td><td>8</td></tr></tbody></table></li></ul><h5 id="浮点数">浮点数</h5><p>类型|有符号数取值范围|无符号数取值范围|字节|备注</p><ul><li><table><tbody><tr><td>FLOAT</td><td>(-3.402823466E+38,-1.175494351E-38),&lt;/br&gt;0,(1.175494351E-38,3.402823466E+38)</td><td>0,(1.175494351E-38,&lt;/br&gt;3.402823466E+38)</td><td>4</td><td>单精度浮点数</td></tr><tr><td>DOUBLE</td><td>(-1.7976931348623157E+308,&lt;/br&gt;-2.2250738585072014E-308),&lt;/br&gt;0,(2.2250738585072014E-308,&lt;/br&gt;1.7976931348623157E+308)</td><td>0,(2.2250738585<em>&lt;/br&gt;072014E-308,&lt;/br&gt;1.7976931348</em>&lt;/br&gt;623157E+308)</td><td>8</td><td>双精度浮点数</td></tr></tbody></table></li></ul><blockquote><p>REAL 默认就是DOUBLE。如果SQL模式设定为“REAL_AS_FLOAT”,那么MySQL就认为REAL是FLOAT，可以通过以下语句实现：</p></blockquote><div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">sql_mode</span> <span class="o">=</span> <span class="nv">"REAL_AS_FLOAT"</span><span class="p">;</span>
</code></pre></div></div><h5 id="定点数">定点数</h5><p>Decimal(M,D),其中M&lt;=65,D&lt;M</p><h5 id="文本类型">文本类型</h5><table><thead><tr><th>类型</th><th>字节</th><th>备注</th></tr></thead><tbody><tr><td>CHAR(M)</td><td>长度M</td><td>固定长字符串，长度不够补空格</td></tr><tr><td>VARCHAR(M)</td><td>M</td><td>可变长字符串</td></tr><tr><td>ENUM</td><td> </td><td>枚举类型，取值必须是预先设定的一组字符串值范围之内的一个</td></tr><tr><td>SET</td><td> </td><td>字符串对象，取值必须是以预先设定的一组字符串范围之内0个或多个</td></tr><tr><td>TINYTEXT</td><td>255</td><td> </td></tr><tr><td>TEXT</td><td>65535</td><td> </td></tr><tr><td>MEDIUMTEXT</td><td>16777215</td><td> </td></tr><tr><td>LONGTEXT</td><td>4294967295</td><td> </td></tr></tbody></table><p>MySQL不允许TEXT做主键</p><h5 id="日期类型">日期类型</h5><p>类型|日期格式|范围|字节</p><ul><li><table><tbody><tr><td>YEAR</td><td>YYYY</td><td>1901-2155</td><td>1</td></tr><tr><td>TIME</td><td>HH:MM:SS</td><td>-838:59:59~838:59:59</td><td>3</td></tr><tr><td>DATE</td><td>YYYY-MM-DD</td><td>1000-01-01~9999-12-3</td><td>3</td></tr><tr><td>DATETIME</td><td>YYYY-MM-DD HH:MM:SS</td><td>1000-01-01 00:00:00~9999-12-31 23:59:59</td><td>8</td></tr><tr><td>TIMESTAMP</td><td>YYYY-MM-DD HH:MM:SS</td><td>1970-01-01 00:00:00 UTC~2038-01-19 03:14:07 UTC</td><td>4</td></tr></tbody></table></li></ul><blockquote><p>在定义数据类型时，如果确定是整数，就用INT；如果是小数，就用DECIMAL；如果是字符串，只要不是主键，就用TET；如果是日期与时间，就用DATETIME。主键最好不选择业务字段，应该使用自动生成列，如bigint</p></blockquote><h4 id="where与having的区别">where与having的区别</h4><p>1、前者可以连接表时，是先过虑数据后连接，后者是先连接后过虑；</p><p>2、后者可以使用聚合函数过虑数据</p><h4 id="函数">函数</h4><p>#####　日期函数 名称|函数|说明</p><ul><li><table><tbody><tr><td>获取日期时间中指定的值</td><td>EXTRACT(type FROM date)</td><td>type包括HOUR,DAY,MONTH,YEAR,MINUTE,SECOND</td></tr><tr><td>获取日期时间中小时</td><td>HOUR()</td><td>获取小时</td></tr><tr><td>获取日期时间中年</td><td>YEAR()</td><td> </td></tr><tr><td>获取日期时间中月</td><td>MONTH()</td><td> </td></tr><tr><td>获取日期时间中天</td><td>DAY()</td><td> </td></tr><tr><td>获取日期时间中分钟</td><td>MINUTE()</td><td> </td></tr><tr><td>获取日期时间中秒</td><td>SECOND()</td><td> </td></tr><tr><td>日期加天</td><td>DATE_ADD()</td><td> </td></tr><tr><td>日期加天</td><td>DDDATE()</td><td> </td></tr><tr><td>日期减天</td><td>DATE_SUB</td><td> </td></tr><tr><td>日期减天</td><td>SUBDATE()</td><td> </td></tr><tr><td>日期相关天数</td><td>DATEDIFF()</td><td> </td></tr><tr><td>当月最后一天日期</td><td>LAST_DAY()</td><td> </td></tr><tr><td>获取当前日期</td><td>CURDATE()</td><td> </td></tr><tr><td>获取日期星期几</td><td>WEEKOFDAY()</td><td> </td></tr><tr><td>格式化日期时间</td><td>DATE_FORMAT()</td><td> </td></tr></tbody></table></li></ul><h5 id="取整函数">取整函数</h5><p>函数|说明</p><ul><li><table><tbody><tr><td>CEIL(X)</td><td>返回大于等于X的最小INT型整数</td></tr><tr><td>CEILING(X)</td><td>返回大于等于X的最小INT型整数</td></tr><tr><td>FLOOR(X)</td><td>返回小于等于X的最小INT型整数</td></tr><tr><td>ROUND(X,D)</td><td>X表示要处理的数，D表示保留的小数位数，处理方式是四舍五入。如果不输入D，表示保留０位小数</td></tr></tbody></table></li></ul><h5 id="字符串函数">字符串函数</h5><p>函数|说明</p><ul><li><table><tbody><tr><td>CONCAT(s1,s2,…)</td><td>表示把字符串拼接起来</td></tr><tr><td>CAST(EXPRESS AS CHAR)</td><td>将表达式的值转换成字符串</td></tr><tr><td>CHAR_LENGTH(s1)</td><td>获取字符串长度</td></tr><tr><td>SPACE(n)</td><td>获取一个由N个空格组成的字符串</td></tr><tr><td>SUBSTR(s,n)或SUBSTR(s FROM n)</td><td>获取从字符串“s”的第“n”个位置开始，到“s”结尾的子字符串</td></tr><tr><td>MID(s,n,len)</td><td>获取从字符串“s”的第“n”个位置，获取长度为len的子字符串</td></tr><tr><td>TRIM(s1 FROM s)</td><td>除去字符串“s”的两端所有的字符串“s1”</td></tr><tr><td>LTRIM(s)</td><td>除去字符串左侧的所有空格</td></tr><tr><td>RTRIM(s)</td><td>除去字符串左侧的所有空格</td></tr><tr><td>IFNULL(V1,V2)</td><td>如果V1的值不为空值，则返回V1,否则返回V2</td></tr><tr><td>IF(EXPRESS,V1,V2)</td><td>如果EXPRESS为true，则返回V1,否则返回V2</td></tr></tbody></table></li></ul><h5 id="not用法">Not用法</h5><p>Not可用于in,exists,between中表示取反</p><h5 id="regexp正则过虑">regexp正则过虑</h5><p>语法：column regexp ‘^233$’ 其中转义符使用：\ 如果要匹配单个\,应该使用:\\</p><h5 id="group-by--with-rowup">group by with rowup</h5><p>分组后汇总</p><p>。INSERT操作可能很耗时（特别是有很多索引需要更新时），而且它可能降低等待处理的SELECT语句的性能。 如果数据检索是最重要的（通常是这样），则你可以通过在INSERT和INTO之间添加关键字LOW_PRIORITY，指示MySQL降低INSERT语句的优先级，如下所示： [插图] 顺便说一下，这也适用于下一章介绍的UPDATE和DELETE语句。</p><p>如果视图定义中有以下操作，则不能进行视图的更新：</p><ul><li>分组（使用GROUP BY和HAVING）；</li><li>联结；</li><li>子查询；</li><li>并；</li><li>聚集函数（Min()、Count()、Sum()等）；</li><li>DISTINCT；</li><li>导出（计算）列。</li></ul><h2 id="函数-1">函数</h2><h3 id="roundxroundxy和truncatexy">ROUND(x)、ROUND(x,y)和TRUNCATE(x,y)</h3><ul><li>ROUND(x)函数返回最接近于参数x的整数，对x值进行四舍五入。</li><li>ROUND(x,y)函数返回最接近于参数x的数，其值保留到小数点后面y位，若y为<strong>负值</strong>，则将保留x值到小数点左边y位。</li><li>TRUNCATE(x,y)函数返回被舍去至小数点后y位的数字x。若y的值为0，则结果不带有小数点或不带有小数部分。若y设为负数，则截去（归零）x小数点左起第y位开始后面所有低位的值。</li></ul><div class="language-sql highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">select</span> <span class="n">ROUND</span><span class="p">(</span><span class="mi">3</span><span class="p">.</span><span class="mi">45</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="n">round</span><span class="p">(</span><span class="mi">3</span><span class="p">.</span><span class="mi">45</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span><span class="n">round</span><span class="p">(</span><span class="mi">123</span><span class="p">.</span><span class="mi">45</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span><span class="n">round</span><span class="p">(</span><span class="mi">153</span><span class="p">.</span><span class="mi">4</span><span class="p">,</span><span class="o">-</span><span class="mi">2</span><span class="p">)</span>

<span class="n">ROUND</span><span class="p">(</span><span class="mi">3</span><span class="p">.</span><span class="mi">45</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>	<span class="n">round</span><span class="p">(</span><span class="mi">3</span><span class="p">.</span><span class="mi">45</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>	<span class="n">round</span><span class="p">(</span><span class="mi">123</span><span class="p">.</span><span class="mi">45</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>	<span class="n">round</span><span class="p">(</span><span class="mi">153</span><span class="p">.</span><span class="mi">4</span><span class="p">,</span><span class="o">-</span><span class="mi">2</span><span class="p">)</span>
<span class="mi">3</span><span class="p">.</span><span class="mi">5</span>	            <span class="mi">3</span>	            <span class="mi">120</span>	                <span class="mi">200</span>


<span class="k">select</span> <span class="k">truncate</span><span class="p">(</span><span class="mi">3</span><span class="p">.</span><span class="mi">45</span><span class="p">,</span><span class="mi">1</span><span class="p">),</span><span class="k">truncate</span><span class="p">(</span><span class="mi">3</span><span class="p">.</span><span class="mi">45</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span><span class="k">truncate</span><span class="p">(</span><span class="mi">123</span><span class="p">.</span><span class="mi">45</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">),</span><span class="k">truncate</span><span class="p">(</span><span class="mi">523</span><span class="p">.</span><span class="mi">4</span><span class="p">,</span><span class="o">-</span><span class="mi">2</span><span class="p">)</span>

<span class="k">truncate</span><span class="p">(</span><span class="mi">3</span><span class="p">.</span><span class="mi">45</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>	<span class="k">truncate</span><span class="p">(</span><span class="mi">3</span><span class="p">.</span><span class="mi">45</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>	<span class="k">truncate</span><span class="p">(</span><span class="mi">123</span><span class="p">.</span><span class="mi">45</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">)</span>	<span class="k">truncate</span><span class="p">(</span><span class="mi">523</span><span class="p">.</span><span class="mi">4</span><span class="p">,</span><span class="o">-</span><span class="mi">2</span><span class="p">)</span>
<span class="mi">3</span><span class="p">.</span><span class="mi">4</span>	                <span class="mi">3</span>	                <span class="mi">120</span>	                    <span class="mi">500</span>

</code></pre></div></div><h3 id="timestamp">timestamp</h3><p>在mysql中timestamp数据类型是一个比较特殊的数据类型，他可以自动在你不使用程序更新情况下，插入或者修改记录会自动更新timestamp的值。</p><table><thead><tr><th>初始值</th><th>说明</th></tr></thead><tbody><tr><td>无</td><td>插入和更新时，自动更新</td></tr><tr><td>ON UPDATE CURRENT_TIMESTAMP</td><td>仅更新时，自动更新</td></tr><tr><td>default CURRENT_TIMESTAMP</td><td>仅插入时，自动更新</td></tr><tr><td>default current_timestamp &lt;/br&gt; on update CURRENT_TIMESTAMP</td><td>插入和更新时，自动更新</td></tr></tbody></table><ul><li>ON UPDATE CURRENT_TIMESTAMP 只有对记录进行修改时才更新为当前时间，插入是不会的</li><li>default CURRENT_TIMESTAMP 在插入记录时，会添加当前时间，但在修改记录时，不会再更新当前时间</li><li>default current_timestamp on update CURRENT_TIMESTAMP 在插入或者更新记录时，都会更新当前时间</li><li>如果default或on update 子句都不写，就等同于 default current_timestamp on update CURRENT_TIMESTAMP</li></ul><div style="margin-top:2em;padding:0 1.5em;border:1px solid #d3d3d3;background-color:#deebf7"><h3>文档信息</h3><ul><li>本文作者：<a href="https://se.zhoubin.online" target="_blank">zhoubin</a></li><li>本文链接：<a href="https://se.zhoubin.online/2024/02/06/mysqlchoosedatatype/" target="_blank">https://se.zhoubin.online/2024/02/06/mysqlchoosedatatype/</a></li><li>版权声明：自由转载-非商用-非衍生-保持署名（<a href="http://creativecommons.org/licenses/by-nc-nd/3.0/deed.zh" target="_blank">创意共享3.0许可证</a>）</li></ul></div></article><div class="share"></div><div class="comment"> <script src="https://giscus.app/client.js" data-repo="usteinfo/blog-comments" data-repo-id="R_kgDOKL8L_A" data-category="Announcements" data-category-id="DIC_kwDOKL8L_M4CY4xg" data-mapping="title" data-strict="1" data-reactions-enabled="1" data-emit-metadata="0" data-input-position="top" data-theme="light" data-lang="zh-CN" data-loading="lazy" crossorigin="anonymous" async> </script></div></div><div class="column one-fourth"><h3>Search</h3><div id="site_search"> <input style="width:96%" type="text" id="search_box" placeholder="Search"></div><ul id="search_results" style="font-size:14px;list-style-type:none;padding-top:10px;padding-left:10px;"></ul><script src="https://se.zhoubin.online/assets/js/simple-jekyll-search.min.js"></script> <script type="text/javascript"> SimpleJekyllSearch({ searchInput: document.getElementById('search_box'), resultsContainer: document.getElementById('search_results'), json: 'https://se.zhoubin.online/assets/search_data.json?v=1707630117', searchResultTemplate: '<li><a href="{url}" title="{title}">{title}</a></li>', noResultsText: 'No results found', limit: 10, fuzzy: false, exclude: ['Welcome'] }) </script><h3 class="post-directory-title mobile-hidden">Table of Contents</h3><div id="post-directory-module" class="mobile-hidden"><section class="post-directory"><dl></dl></section></div><script src="https://se.zhoubin.online/assets/js/jquery.toc.js"></script></div></div></section><footer class="container"><div class="site-footer" role="contentinfo"><div class="copyright left mobile-block"> © 2023 <span title="zhoubin">zhoubin</span> <a href="javascript:window.scrollTo(0,0)" class="right mobile-visible">TOP</a></div><ul class="site-footer-links right mobile-hidden"><li> <a href="javascript:window.scrollTo(0,0)" >TOP</a></li></ul><a href="https://github.com/usteinfo/usteinfo.github.io" target="_blank" aria-label="view source code"> <span class="mega-octicon octicon-mark-github" title="GitHub"></span> </a><ul class="site-footer-links mobile-hidden"><li> <a href="https://se.zhoubin.online/" title="首页" target="">首页</a></li><li> <a href="https://se.zhoubin.online/categories/" title="分类" target="">分类</a></li><li> <a href="https://se.zhoubin.online/archives/" title="归档" target="">归档</a></li><li> <a href="https://se.zhoubin.online/open-source/" title="开源" target="">开源</a></li><li> <a href="https://se.zhoubin.online/fragments/" title="片段" target="">片段</a></li><li> <a href="https://se.zhoubin.online/wiki/" title="维基" target="">维基</a></li><li> <a href="https://se.zhoubin.online/links/" title="链接" target="">链接</a></li><li> <a href="https://se.zhoubin.online/about/" title="关于" target="">关于</a></li><li><a href="https://se.zhoubin.online/feed.xml"><span class="octicon octicon-rss" style="color:orange;"></span></a></li></ul></div></footer><div class="tools-wrapper"> <a class="gotop" href="#" title="回到顶部"><span class="octicon octicon-arrow-up"></span></a></div><script src="https://se.zhoubin.online/assets/js/geopattern.js"></script> <script> jQuery(document).ready(function($) { $('.geopattern').each(function(){ $(this).geopattern($(this).data('pattern-id')); }); /* hljs.initHighlightingOnLoad(); */ }); </script></body></html>
